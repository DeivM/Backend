"use strict";(self.webpackChunkxtreme_admin_angular=self.webpackChunkxtreme_admin_angular||[]).push([[989],{4989:(J,u,r)=>{r.r(u),r.d(u,{CitaModule:()=>k});var p=r(6895),n=r(4006),f=r(911),Z=r(9340),h=r(2654),C=r(4691),s=r(6137),b=r(13),t=r(4650),g=r(6013),d=r(3609),_=r(6541);function x(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA(),t.TgZ(19,"td")(20,"a",17),t.NdJ("click",function(){const m=t.CHM(e).$implicit,l=t.oxw(),M=t.MAs(42);return t.KtG(l.openModal(M,m))}),t._UZ(21,"i-feather",18),t.qZA(),t.TgZ(22,"a",19),t.NdJ("click",function(){const m=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.delete(m.citId))}),t._UZ(23,"i-feather",20),t.qZA()()()}if(2&i){const e=a.$implicit;t.xp6(2),t.hij("",e.usuNombres," "),t.xp6(2),t.hij("",e.espNombre," "),t.xp6(2),t.hij("",e.medNombres," "),t.xp6(2),t.hij("",e.citFechaAtencion," "),t.xp6(2),t.hij("",e.citInicioAtencion," "),t.xp6(2),t.hij("",e.citFinAtencion," "),t.xp6(2),t.hij("",e.citEstadoPaciente," "),t.xp6(2),t.hij("",e.citObservaciones," "),t.xp6(2),t.hij("",e.citEstado?"Activo":"Inactivo"," ")}}function v(i,a){if(1&i&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",null==e?null:e.nombre,"")}}function A(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"option",52),t.NdJ("click",function(){const m=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.buscarMedico(m.id))}),t._uU(1),t.qZA()}if(2&i){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",null==e?null:e.nombre,"")}}function T(i,a){if(1&i&&(t.TgZ(0,"option",51),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",null==e?null:e.nombre,"")}}function q(i,a){if(1&i&&(t.TgZ(0,"span",53),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.formsErrors.citFechaAtencion," ")}}function U(i,a){if(1&i&&(t.TgZ(0,"span",53),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.formsErrors.citInicioAtencion," ")}}function F(i,a){if(1&i&&(t.TgZ(0,"span",53),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.formsErrors.citFinAtencion," ")}}function I(i,a){if(1&i&&(t.TgZ(0,"span",53),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.formsErrors.citEstadoPaciente," ")}}function E(i,a){if(1&i&&(t.TgZ(0,"span",53),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.formsErrors.citObservaciones," ")}}function P(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",21)(1,"h5",22),t._uU(2),t.qZA(),t.TgZ(3,"button",23),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.closeBtnClick())}),t.TgZ(4,"span",24),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",25)(7,"form",26),t.NdJ("ngSubmit",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.onSubmit())}),t.TgZ(8,"div",27)(9,"label",28),t._uU(10,"Paciente *"),t.qZA(),t.TgZ(11,"div",29)(12,"select",30)(13,"option",31),t._uU(14,"Seleccionar "),t.qZA(),t.YNc(15,v,2,2,"option",32),t.qZA()()(),t.TgZ(16,"div",27)(17,"label",33),t._uU(18,"Especialidad *"),t.qZA(),t.TgZ(19,"div",29)(20,"select",34)(21,"option",31),t._uU(22,"Seleccionar "),t.qZA(),t.YNc(23,A,2,2,"option",35),t.qZA()()(),t.TgZ(24,"div",27)(25,"label",36),t._uU(26,"M\xe9dico *"),t.qZA(),t.TgZ(27,"div",29)(28,"select",37)(29,"option",31),t._uU(30,"Seleccionar "),t.qZA(),t.YNc(31,T,2,2,"option",32),t.qZA()()(),t.TgZ(32,"div",27)(33,"label",38),t._uU(34,"Fecha de atenci\xf3n *"),t.qZA(),t.TgZ(35,"div",29),t._UZ(36,"input",39),t.YNc(37,q,2,1,"span",40),t.qZA()(),t.TgZ(38,"div",27)(39,"label",38),t._uU(40,"Hora de Inicio *"),t.qZA(),t.TgZ(41,"div",29),t._UZ(42,"input",41),t.YNc(43,U,2,1,"span",40),t.qZA()(),t.TgZ(44,"div",27)(45,"label",38),t._uU(46,"Hora de Fin *"),t.qZA(),t.TgZ(47,"div",29),t._UZ(48,"input",42),t.YNc(49,F,2,1,"span",40),t.qZA()(),t.TgZ(50,"div",27)(51,"label",38),t._uU(52,"Estado de Paciente *"),t.qZA(),t.TgZ(53,"div",29),t._UZ(54,"input",43),t.YNc(55,I,2,1,"span",40),t.qZA()(),t.TgZ(56,"div",27)(57,"label",38),t._uU(58,"Observaciones *"),t.qZA(),t.TgZ(59,"div",29),t._UZ(60,"input",44),t.YNc(61,E,2,1,"span",40),t.qZA()(),t.TgZ(62,"div",27)(63,"div",45),t._UZ(64,"input",46),t.TgZ(65,"label",47),t._uU(66,"Activo"),t.qZA()()(),t.TgZ(67,"div",48)(68,"button",49),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.closeBtnClick())}),t._uU(69,"Cerrar"),t.qZA(),t.TgZ(70,"button",50),t._uU(71,"Guardar"),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(2),t.hij("",e.anadirEditar," Cita"),t.xp6(5),t.Q6J("formGroup",e.itemForm),t.xp6(8),t.Q6J("ngForOf",e.pacientes),t.xp6(8),t.Q6J("ngForOf",e.medicosEspecialidad),t.xp6(8),t.Q6J("ngForOf",e.medicos),t.xp6(6),t.Q6J("ngIf",e.formsErrors.citFechaAtencion),t.xp6(6),t.Q6J("ngIf",e.formsErrors.citInicioAtencion),t.xp6(6),t.Q6J("ngIf",e.formsErrors.citFinAtencion),t.xp6(6),t.Q6J("ngIf",e.formsErrors.citEstadoPaciente),t.xp6(6),t.Q6J("ngIf",e.formsErrors.citObservaciones),t.xp6(9),t.Q6J("disabled",e.itemForm.invalid)}}const S=[{path:"",data:{title:"Cita",urls:[]},children:[{path:"",component:(()=>{class i{constructor(e,o,c,m){this.httpService=e,this.notifierService=o,this.modalService=c,this.fb=m,this.indexParameters=new Z.p,this.itemsSub=new h.w,this.items=[],this.search=new n.p4("",[]),this.formsErrors=[],this.itemSub=new h.w,this.anadirEditar="A\xf1adir",this.notifier=o}ngOnInit(){this.itemForm=this.fb.group({citId:[0],usuId:[0],espId:[0],mesId:[0],citFechaAtencion:[null,n.kI.required],citInicioAtencion:[null,n.kI.required],citFinAtencion:[null,n.kI.required],citEstadoPaciente:[null,n.kI.required],citObservaciones:[null,n.kI.required],citEstado:[!0]}),this.indexParameters.length=s.Kz.count,this.indexParameters.pageSize=s.Kz.quantity,this.indexParameters.quantity=s.Kz.quantity,this.indexParameters.pageIndex=s.Kz.page,this.indexParameters.modulo=s.qz.cita.name,this.indexParameters.actionResult=void 0,this.search.valueChanges.pipe((0,b.b)(350)).subscribe(e=>{this.indexParameters.search=e&&e.trim()?e:void 0,this.getItems()}),this.getItems(),this.medicos=[],this.pacientes=[],this.medicosEspecialidad=[]}ngOnDestroy(){this.itemsSub.unsubscribe(),this.itemSub.unsubscribe()}getItems(){this.itemsSub=this.httpService.getItems(this.indexParameters).subscribe(e=>{this.items=e?.data?.elementos,this.indexParameters.length=e?.data?.cantidadElementos,this.items&&0==this.items.length&&this.notifier.notify("warning","No hay datos para mostrar")})}changePagination(e){this.indexParameters.page=e,this.getItems()}openModal(e,o){this.modalService.open(e,{centered:!0,backdrop:"static"}),null!=o?(this.anadirEditar="Editar",this.getDataForm(o.citId)):this.getDataForm(0)}logValidationErrors(e){}closeBtnClick(){this.modalService.dismissAll(),this.ngOnInit()}getDataForm(e){this.itemSub=this.httpService.GetDataForm(e,void 0,s.qz.cita.name).subscribe(o=>{this.medicos=o.data?.medicos,this.pacientes=o.data?.pacientes,this.medicosEspecialidad=o.data?.medicosEspecialidad,o.data?.data&&(this.itemForm.patchValue(o.data?.data),this.itemForm.patchValue({citEstado:(0,s.kp)(o.data?.data.citEstado)}))})}onSubmit(){this.itemForm.invalid?this.itemForm.markAllAsTouched():(this.itemForm.patchValue({citEstado:(0,s.ID)(this.itemForm.value.citEstado)}),this.itemsSub=this.httpService.PostPut(this.itemForm.value,s.qz.cita.name,!1,void 0,this.itemForm.value.citId).subscribe(e=>{this.closeBtnClick(),this.notifier.notify("success","Se ha registrado los datos correctamente")}))}delete(e){let o=[];o.push(e),this.itemsSub=this.httpService.deleteItems(s.qz.cita.name,void 0,o).subscribe(c=>{this.closeBtnClick(),this.notifier.notify("success","El dato se ha eliminado")})}buscarMedico(e){[].push(e),this.itemsSub=this.httpService.GetByIdList(e,0,s.qz.medico.name,"GetList").subscribe(c=>{this.medicos=c})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C.O),t.Y36(g.lG),t.Y36(d.FF),t.Y36(n.QS))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-cita"]],decls:43,vars:5,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"col-md-6","col-lg-3","col-xl-2"],["type","text","type","text","name","search","placeholder","Buscar Cita",1,"form-control","form-control-lg",3,"formControl"],[1,"col-md-6","col-lg-9","col-xl-10","text-md-right","mt-4","mt-md-0"],[1,"btn","btn-primary","ml-auto",3,"click"],[1,"col-12"],[1,"card","card-body"],[1,"table-responsive","table-bordered"],[1,"table","table-striped","mb-0","no-wrap","v-middle"],["scope","col"],[4,"ngFor","ngForOf"],[1,"justify-content-center","mt-2"],["maxSize","20","size","sm","rotate","true",3,"page","pageSize","collectionSize","pageChange"],["itemFormModal",""],["href","javascript: void(0);","placement","top","ngbTooltip","Editar",1,"link","mr-2",3,"click"],["name","edit-2",1,"feather-sm"],["href","javascript: void(0);","placement","top","ngbTooltip","Eliminar",1,"link",3,"click"],["name","trash-2",1,"feather-sm"],[1,"modal-header"],["id","itemFormLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","usuId",1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["formControlName","usuId","id","usuId",1,"custom-select"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","espId",1,"col-sm-4","col-form-label"],["formControlName","espId","id","espId",1,"custom-select"],[3,"value","click",4,"ngFor","ngForOf"],["for","mesId",1,"col-sm-4","col-form-label"],["formControlName","mesId","id","mesId",1,"custom-select"],["for","name",1,"col-sm-4","col-form-label"],["type","date","formControlName","citFechaAtencion",1,"form-control"],["class","help-block",4,"ngIf"],["type","time","formControlName","citInicioAtencion",1,"form-control"],["type","time","formControlName","citFinAtencion",1,"form-control"],["type","text","formControlName","citEstadoPaciente",1,"form-control","textoPrimeraLetraMinuscula"],["type","text","formControlName","citObservaciones",1,"form-control","textoPrimeraLetraMinuscula"],[1,"custom-control","custom-checkbox","mr-sm-2"],["type","checkbox","id","checkbox1","formControlName","citEstado",1,"custom-control-input"],["for","checkbox1",1,"custom-control-label"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"value"],[3,"value","click"],[1,"help-block"]],template:function(e,o){if(1&e){const c=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",0)(5,"div",4),t._UZ(6,"input",5),t.qZA(),t.TgZ(7,"div",6)(8,"button",7),t.NdJ("click",function(){t.CHM(c);const l=t.MAs(42);return t.KtG(o.openModal(l,null))}),t._uU(9,"A\xf1adir Cita"),t.qZA()()()()()()(),t.TgZ(10,"div",0)(11,"div",8)(12,"div",9)(13,"div",10)(14,"table",11)(15,"thead")(16,"tr")(17,"th",12),t._uU(18,"Paciente"),t.qZA(),t.TgZ(19,"th",12),t._uU(20,"Especialidad"),t.qZA(),t.TgZ(21,"th",12),t._uU(22,"M\xe9dico"),t.qZA(),t.TgZ(23,"th",12),t._uU(24,"Fecha de atenci\xf3n"),t.qZA(),t.TgZ(25,"th",12),t._uU(26,"Hora de Inicio"),t.qZA(),t.TgZ(27,"th",12),t._uU(28,"Hora de Fin"),t.qZA(),t.TgZ(29,"th",12),t._uU(30,"Estado de Paciente"),t.qZA(),t.TgZ(31,"th",12),t._uU(32,"Observaciones"),t.qZA(),t.TgZ(33,"th",12),t._uU(34,"Estado"),t.qZA(),t.TgZ(35,"th",12),t._uU(36,"Acciones"),t.qZA()()(),t.TgZ(37,"tbody"),t.YNc(38,x,24,9,"tr",13),t.qZA()()(),t.TgZ(39,"div",14)(40,"ngb-pagination",15),t.NdJ("pageChange",function(l){return o.indexParameters.pageIndex=l})("pageChange",function(l){return o.changePagination(l)}),t.qZA()()()()(),t.YNc(41,P,72,11,"ng-template",null,16,t.W1O)}2&e&&(t.xp6(6),t.Q6J("formControl",o.search),t.xp6(32),t.Q6J("ngForOf",o.items),t.xp6(2),t.Q6J("page",o.indexParameters.pageIndex)("pageSize",o.indexParameters.pageSize)("collectionSize",o.indexParameters.length))},dependencies:[p.sg,p.O5,n._Y,n.YN,n.Kr,n.Fj,n.Wl,n.EJ,n.JJ,n.JL,n.oH,n.sg,n.u,d.N9,d._L,_.uy],styles:[".viewport[_ngcontent-%COMP%]  video{width:100%;height:240px;-o-object-fit:cover;object-fit:cover}.tabla-detalle-popup[_ngcontent-%COMP%]{width:100%;text-align:left!important}.image[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:50%!important}.textoPrimeraLetraMinuscula[_ngcontent-%COMP%]{text-transform:capitalize}"]}),i})()}]}];var y=r(6311),N=r(5074);let k=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[g.lG],imports:[p.ez,n.UX,d.IJ,d.bz,f.Bz.forChild(S),n.u5,y.Xd,_.p1.pick(N.kEt)]}),i})()}}]);